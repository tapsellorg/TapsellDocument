---
layout: classic-docs
title: سیستم صحت سنجی
toc: true
permalink: /s2s/index.html
lang: fa
---

سرویس صحت سنجی تبلیغات تپسل (S2S Verification) برای اپلیکیشن‌ها و بازی‌های آنلاین طراحی شده است تا توسعه دهندگان از صحت تبلیغ نشان‌داده شده اطمینان حاصل نمایند و امکان سوء استفاده از تبلیغات در نسخه‌های mod شده بازی غیرممکن شود.  

نحوه کارکرد سیستم صحت سنجی به این صورت است که پس از نمایش تبلیغ در اپلیکیشن، میبایست شناسه تبلیغ (suggestionId) برای سرور بازی یا اپلیکیشن ارسال شود؛ سپس سرور بازی/اپلیکیشن با ارسال یک درخواست به سرور تپسل، از معتبر بودن شناسه ارسال شده اطمینان حاصل نماید.

جهت ارتباط سرور به سرور از آدرس زیر استفاده نمایید.

```
http://api.tapsell.ir/v2/suggestions/validate-suggestion
```

درخواست ارسال شده باید بصورت `POST` بوده و محتوای ارسالی بصورت `json` باشد. `(Content-Type:application/json)`

> ناشرینی که قصد استفاده از سیستم صحت سنجی تبلیغات تپسل را دارند میبایست درخواست خود را از طریق تماس تلفنی یا ارسال ایمیل به آدرس info@tapsell.ir به واحد فنی تپسل اطلاع دهند.

شناسه تبلیغ باید در بدنه درخواست و بصورت زیر گنجانده شود.

```json
{
  "suggestionId":"SUGGESTION_ID"
}
```

مقدار `SUGGESTION_ID` را در کال‌بک `onAdShowFinished` به کمک روش زیر می‌توانید دریافت کنید.

```java
Tapsell.setRewardListener(new TapsellRewardListener() {
    @Override
    public void onAdShowFinished(final TapsellAd ad, final boolean completed) {
        suggestionId = ad.getAd().getSuggestionId().toString();
    }
});
```
پاسخ برگردانده شده به درخواست ارسال شده نیز بصورت `json` و مطابق نمونه‌ی زیر است.

```json
{
  "valid": true
}
```

در صورتی که مقدار پارامتر `valid` در پاسخ برگردانده شده برابر `true` باشد، یعنی شناسه ارسال شده معتبر است. در غیر اینصورت شناسه تبلیغ ارسالی معتبر نبوده‌است.

> دقت کنید که هر شناسه تبلیغ کدی یکبار مصرف است و اگر یکبار آن شناسه معتبر شناخته شود، در دفعات بعدی معتبر شناخته نخواهد شد.
